# Sherlock Assistant Project Rules

## 1. 코드 스타일 및 구조
깔끔하고 유지보수하기 쉬운 구조를 유지한다.

- TypeScript를 전면 사용하며, 명확한 타입 선언을 권장한다.
- 컴포넌트는 모두 Named export를 기본으로 한다.
- 상태는 전역 필요 시 Zustand, 지역 상태는 useState 또는 useReducer를 쓴다.
- 디렉토리 구조는 다음 순서를 따른다: app → components → lib → store → types → styles
- 모든 컴포넌트는 `/components`에 저장하며, 기능별로 폴더를 나눈다.

## 2. UI/UX 규칙 (shadcn/ui + Tailwind)
사용자 친화적이고 일관된 디자인을 유지한다.

- 모든 UI는 가능한 shadcn/ui 컴포넌트를 먼저 사용한다.
- Tailwind는 유틸리티 성격으로 shadcn 컴포넌트 커스터마이징에 사용한다.
- UI 요소(Checkbox, Dialog, Tabs 등)는 별도 파일로 분리하여 재사용 가능하게 만든다.
- 폰트 크기, 색상, 여백은 shadcn 테마에 맞춰 통일한다.

## 3. 데이터 및 추론 로직
셜록13 캐릭터 정보와 추리 알고리즘은 lib/에 구조화한다.

- `lib/symbols.ts`에 캐릭터와 아이콘 정보 정리
- `lib/deduction.ts`에 후보 소거 로직 함수 작성
- 데이터 로직은 컴포넌트와 분리해서 재사용성과 테스트 용이성을 높인다.
- 캐릭터 이름과 아이콘은 enum 혹은 const assertion으로 관리한다.

## 4. 상태 관리 (Zustand)
전역 게임 상태를 관리하고 UI에 연결한다.

- `store/useGameStore.ts`에 zustand 스토어 정의
- 상태는 불변성을 유지하며, immer 또는 구조 분해를 사용해 관리
- 현재 손패, 질문 기록, 제거된 후보 상태 등은 store에 저장한다.

## 5. 프로젝트 명세와 협업 규칙
Cursor AI와 협업하며 맥락을 유지하기 위한 규칙.

- 모든 컴포넌트와 함수에 JSDoc 주석을 작성한다.
- 커서에게 함수 작성 요청 시 input/output 타입, 위치, UI 기대 형태를 명확히 설명한다.
- 동작 흐름(예: 손패 입력 → 후보 자동 소거 → 추리 시도)을 커서에게 전체적으로 전달한다.
- 변경 작업 시 관련 상태나 추론 로직의 영향 범위를 고려한다. 

# 🕵️ Sherlock13 Helper Web App

셜록13 보드게임을 위한 디지털 추리 도우미 웹 애플리케이션입니다.

## 📘 프로젝트 개요

이 웹사이트는 보드게임 **셜록13 (Sherlock 13)**을 보조하기 위한 웹 기반 추리 도우미입니다. 각 플레이어가 자신의 손패를 기반으로 숨겨진 범인 1장을 소거 추리해나가는 구조로, 종이 기록지를 사용하는 번거로움을 줄이고, 디지털 기록과 자동 소거 추론 기능을 제공합니다.

## 💡 주요 목적

- 셜록13 게임의 종이 기록지를 대체하는 인터랙티브 디지털 기록지 제공
- 각 캐릭터가 가진 아이콘 조합을 시각적으로 보여주고, 플레이어가 직접 체크/소거 가능
- 내 손패 정보와 질문/답변 기록을 기반으로 남은 후보 캐릭터를 자동 필터링
- 손패 입력 → 질문 기록 → 후보 정리 → 추리 진행이라는 플레이 흐름을 유기적으로 연결
- 추리 결과를 시뮬레이션하거나, 메모 기능을 통한 플레이 전략 기록 가능

## 🧱 기술 스택

- **React / Next.js (App Router)**: 전체 프론트 프레임워크
- **TypeScript**: 타입 안정성 확보
- **Tailwind CSS**: 스타일링
- **shadcn/ui**: 컴포넌트 라이브러리 (Checkbox, Table, Tabs, Dialog 등 사용)
- **Zustand**: 전역 상태 관리 (내 손패, 질문 기록, 후보 필터링 결과 등)
- **(옵션) Firebase/Supabase**: 향후 저장 기능 확장 시 사용 고려

## 🔧 핵심 기능

### 1. 🧾 손패 입력

- 게임 시작 시, 플레이어가 자신의 손패 3~6장을 선택하여 입력
- 내 손패에 포함된 아이콘들은 범인 카드에 존재할 수 없기 때문에 자동으로 기록지에서 제외

### 2. 📊 기록지

- 13명의 캐릭터 × 7종 아이콘 조합 테이블 표시
- 사용자는 각 셀에 ✔️ / ❌ / ❓로 추론 결과를 체크
- 각 캐릭터에 어떤 아이콘이 있는지 직관적으로 확인 가능

### 3. 🔍 질문 기록

- 질문 예: "플레이어 A는 🔍 아이콘이 몇 개 있습니까?"
- 응답값과 질문자를 함께 기록해두고, 추론 로직에 활용
- UI는 from, symbol, answer를 입력하는 간단한 폼

### 4. 🤖 자동 추리 도우미

- 현재 손패 정보, 질문 기록을 기반으로 남아 있는 가능성 있는 캐릭터 후보 리스트를 자동 필터링
- 사용자가 직접 소거하지 않아도 남은 후보를 계산해 UI에 표시

### 5. 📌 추리 선언

- 플레이어가 "범인은 제임스 모리어티입니다"라고 추리하면, 해당 캐릭터 정보를 띄워주며 성공/실패 여부를 체크 가능 (선택적)

### 6. 📝 메모 및 전략 공간

- 각 플레이어별 자유롭게 기록 가능한 메모 공간 제공
- "A는 🔍가 3개 있다고 했으니 B가 모리어티일 가능성 없음" 같은 전략 메모 저장

## 🧠 주요 로직

### deduction.ts

```typescript
// 입력: myCards: Character[], questionLog: QuestionRecord[]
// 출력: 가능한 후보 Character[]

// 처리 흐름:
// 1. myCards에 있는 모든 아이콘을 제외
// 2. 남아 있는 캐릭터 중 아이콘 조합이 질문 결과와 모순되지 않는 후보만 리턴
```

### symbols.ts

```typescript
// 13명 캐릭터의 이름 및 해당 아이콘 조합 정보를 const로 구조화
interface Character {
  name: string;
  icons: string[];
}
```

## 💻 주요 컴포넌트 구조

| 컴포넌트             | 설명                                                        |
| -------------------- | ----------------------------------------------------------- |
| `CardTable.tsx`      | 캐릭터-아이콘 기록 테이블, 각 셀은 Checkbox 혹은 3단계 토글 |
| `SetupPanel.tsx`     | 게임 시작 시 내 손패를 선택하는 UI                          |
| `QuestionLog.tsx`    | 질문 기록 추가 및 목록 표시 (shadcn Accordion 혹은 Table)   |
| `CandidateList.tsx`  | 현재 유효한 후보 캐릭터 필터링 결과 출력                    |
| `PlayerNote.tsx`     | 텍스트 메모 공간                                            |
| `DeductionEngine.ts` | 후보 자동 필터링 로직 정의                                  |
| `useGameStore.ts`    | Zustand 전역 상태 (내 카드, 질문 기록, 후보 리스트 등)      |

## 🌐 사용자 흐름 시나리오

1. 사용자는 `/setup` 화면에서 자신의 손패를 선택
2. `/play` 화면으로 이동해 기록지에 자동 체크된 아이콘 확인
3. 다른 플레이어에게 아이콘 개수 질문 → QuestionLog에 기록
4. 자동 필터링 시스템이 남은 후보 캐릭터를 계산하여 표시
5. 추리 성공 시 기록 저장 (옵션), 메모 정리

## 📁 프로젝트 구조

```
app/
  ├── setup/
  │   └── page.tsx
  ├── play/
  │   └── page.tsx
  └── layout.tsx
components/
  ├── CardTable/
  ├── SetupPanel/
  ├── QuestionLog/
  ├── CandidateList/
  └── PlayerNote/
lib/
  ├── symbols.ts
  └── deduction.ts
store/
  └── useGameStore.ts
types/
  └── index.ts
styles/
  └── globals.css
```
