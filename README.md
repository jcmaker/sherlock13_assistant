# 🕵️ Sherlock13 Helper Web App

셜록13 보드게임을 위한 디지털 추리 도우미 웹 애플리케이션입니다.

## 📘 프로젝트 개요

이 웹사이트는 보드게임 **셜록13 (Sherlock 13)**을 보조하기 위한 웹 기반 추리 도우미입니다. 각 플레이어가 자신의 손패를 기반으로 숨겨진 범인 1장을 소거 추리해나가는 구조로, 종이 기록지를 사용하는 번거로움을 줄이고, 디지털 기록과 자동 소거 추론 기능을 제공합니다.

## 💡 주요 목적

- 셜록13 게임의 종이 기록지를 대체하는 인터랙티브 디지털 기록지 제공
- 각 캐릭터가 가진 아이콘 조합을 시각적으로 보여주고, 플레이어가 직접 체크/소거 가능
- 내 손패 정보와 질문/답변 기록을 기반으로 남은 후보 캐릭터를 자동 필터링
- 손패 입력 → 질문 기록 → 후보 정리 → 추리 진행이라는 플레이 흐름을 유기적으로 연결
- 추리 결과를 시뮬레이션하거나, 메모 기능을 통한 플레이 전략 기록 가능

## 🧱 기술 스택

- **React / Next.js (App Router)**: 전체 프론트 프레임워크
- **TypeScript**: 타입 안정성 확보
- **Tailwind CSS**: 스타일링
- **shadcn/ui**: 컴포넌트 라이브러리 (Checkbox, Table, Tabs, Dialog 등 사용)
- **Zustand**: 전역 상태 관리 (내 손패, 질문 기록, 후보 필터링 결과 등)
- **(옵션) Firebase/Supabase**: 향후 저장 기능 확장 시 사용 고려

## 🔧 핵심 기능

### 1. 🧾 손패 입력

- 게임 시작 시, 플레이어가 자신의 손패 3~6장을 선택하여 입력
- 내 손패에 포함된 아이콘들은 범인 카드에 존재할 수 없기 때문에 자동으로 기록지에서 제외

### 2. 📊 기록지

- 13명의 캐릭터 × 7종 아이콘 조합 테이블 표시
- 사용자는 각 셀에 ✔️ / ❌ / ❓로 추론 결과를 체크
- 각 캐릭터에 어떤 아이콘이 있는지 직관적으로 확인 가능

### 3. 🔍 질문 기록

- 질문 예: "플레이어 A는 🔍 아이콘이 몇 개 있습니까?"
- 응답값과 질문자를 함께 기록해두고, 추론 로직에 활용
- UI는 from, symbol, answer를 입력하는 간단한 폼

### 4. 🤖 자동 추리 도우미

- 현재 손패 정보, 질문 기록을 기반으로 남아 있는 가능성 있는 캐릭터 후보 리스트를 자동 필터링
- 사용자가 직접 소거하지 않아도 남은 후보를 계산해 UI에 표시

### 5. 📌 추리 선언

- 플레이어가 "범인은 제임스 모리어티입니다"라고 추리하면, 해당 캐릭터 정보를 띄워주며 성공/실패 여부를 체크 가능 (선택적)

### 6. 📝 메모 및 전략 공간

- 각 플레이어별 자유롭게 기록 가능한 메모 공간 제공
- "A는 🔍가 3개 있다고 했으니 B가 모리어티일 가능성 없음" 같은 전략 메모 저장

## 🧠 주요 로직

### deduction.ts

```typescript
// 입력: myCards: Character[], questionLog: QuestionRecord[]
// 출력: 가능한 후보 Character[]

// 처리 흐름:
// 1. myCards에 있는 모든 아이콘을 제외
// 2. 남아 있는 캐릭터 중 아이콘 조합이 질문 결과와 모순되지 않는 후보만 리턴
```

### symbols.ts

```typescript
// 13명 캐릭터의 이름 및 해당 아이콘 조합 정보를 const로 구조화
interface Character {
  name: string;
  icons: string[];
}
```

## 💻 주요 컴포넌트 구조

| 컴포넌트             | 설명                                                        |
| -------------------- | ----------------------------------------------------------- |
| `CardTable.tsx`      | 캐릭터-아이콘 기록 테이블, 각 셀은 Checkbox 혹은 3단계 토글 |
| `SetupPanel.tsx`     | 게임 시작 시 내 손패를 선택하는 UI                          |
| `QuestionLog.tsx`    | 질문 기록 추가 및 목록 표시 (shadcn Accordion 혹은 Table)   |
| `CandidateList.tsx`  | 현재 유효한 후보 캐릭터 필터링 결과 출력                    |
| `PlayerNote.tsx`     | 텍스트 메모 공간                                            |
| `DeductionEngine.ts` | 후보 자동 필터링 로직 정의                                  |
| `useGameStore.ts`    | Zustand 전역 상태 (내 카드, 질문 기록, 후보 리스트 등)      |

## 🌐 사용자 흐름 시나리오

1. 사용자는 `/setup` 화면에서 자신의 손패를 선택
2. `/play` 화면으로 이동해 기록지에 자동 체크된 아이콘 확인
3. 다른 플레이어에게 아이콘 개수 질문 → QuestionLog에 기록
4. 자동 필터링 시스템이 남은 후보 캐릭터를 계산하여 표시
5. 추리 성공 시 기록 저장 (옵션), 메모 정리

## 📁 프로젝트 구조

```
app/
  ├── setup/
  │   └── page.tsx
  ├── play/
  │   └── page.tsx
  └── layout.tsx
components/
  ├── CardTable/
  ├── SetupPanel/
  ├── QuestionLog/
  ├── CandidateList/
  └── PlayerNote/
lib/
  ├── symbols.ts
  └── deduction.ts
store/
  └── useGameStore.ts
types/
  └── index.ts
styles/
  └── globals.css
```

## 📝 변경 이력

### v1.2.1 (2025-06-12)

- **추가**: 수동 제거 및 유력 후보 기능 구현
  - 각 캐릭터 카드에 수동 제거(X) 및 유력 후보 체크(✓) 버튼 추가
  - 제거된 캐릭터는 빨간색 테두리와 취소선으로 표시
  - 유력 후보는 노란색 테두리와 배경으로 강조
  - 모든 버튼에 툴팁 추가로 기능 설명 제공
- **개선**: Zustand 스토어 최적화
  - 상태 선택자 개별 분리로 무한 루프 문제 해결
  - 성능 최적화를 위한 렌더링 최소화
- **수정**: 타입 시스템 개선
  - QuestionRecord 타입에 type과 success 필드 추가
  - IconMark 타입을 "checked", "crossed", "none"으로 단순화

### v1.2.0 (2025-06-09)

- 질문 제안 기능 추가
- 플레이어별 아이콘 정보 완성도 계산 로직 구현
- UI/UX 개선

### v1.1.0 (2025-06-08)

- 기본 게임 플레이 기능 구현
- 캐릭터 카드 테이블 구현
- 질문 기록 시스템 구현

### v1.0.0 (2025-06-08)

- 초기 프로젝트 설정
- 기본 UI 컴포넌트 구현
- 게임 상태 관리 시스템 구축
